<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png" />
    <!-- TODO: cambiar favicon -->
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Sentinel</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <!-- Bootstrap core CSS     -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <!--  Material Dashboard CSS    -->
    <link href="/css/material-dashboard.css?v=1.2.0" rel="stylesheet" />
    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="/css/demo.css" rel="stylesheet" />
    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300|Material+Icons' rel='stylesheet' type='text/css'>
</head>

<body>
    <div class="wrapper">
        <div class="sidebar" data-color="orange" data-image="/img/sidebar-1.jpg">
            <!--
        Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

        Tip 2: you can also add an image using data-image tag
    -->
            <div class="logo">
                <a href="#" class="simple-text">
                    Sentinel
                </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li>
                        <a href="/descubre">
                            <i class="material-icons">bubble_chart</i>
                            <p>Descubre</p>
                        </a>
                    </li>
                    <li class="active">
                        <a href="/lideres">
                            <i class="material-icons">person</i>
                            <p>Líderes de opinión</p>
                        </a>
                    </li>
                    <li>
                        <a href="/partidos">
                            <i class="material-icons">group</i>
                            <p>Partidos políticos</p>
                        </a>
                    </li>
                    <li>
                        <a href="/instituciones">
                            <i class="material-icons">business</i>
                            <p>Instituciones</p>
                        </a>
                    </li>
                    <li>
                        <a href="/casos">
                            <i class="material-icons">gavel</i>
                            <p>Casos de corrupción</p>
                        </a>
                    </li>
                    <li>
                        <a href="/medios">
                            <i class="material-icons">web</i>
                            <p>Medios</p>
                        </a>
                    </li>
                    <li class="active-pro">
                        <a href="#">
                            <i class="material-icons">info</i>
                            <p>Aviso legal</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-panel">
            <nav class="navbar navbar-transparent navbar-absolute">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <!-- TODO: cambiar titulo -->
                        <a class="navbar-brand" href="#"> Sentinel </a>
                    </div>
                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-right">
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-3 dropdown">
                            <a id="dropdown-title" href="#" class="btn dropdown-toggle" data-toggle="dropdown">
                                <!-- TODO: reemplazar por el primero en orden alfabetico (con ejs) -->
                                <% if (lideres.length > 0) { %>
                                <%= lideres[0].name %>
                                <% } %>
                                <b class="caret"></b>
                            </a>
                            <ul id="lideres" class="dropdown-menu">
                                <% if (lideres.length > 0) { %>
                                <% lideres.forEach(function (lider) { %>
                                    <li><a id="<%= lider.id %>" href="#"><%= lider.name %></a></li>
                                <% }) %>
                                <% } %>
                                <!--
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                                <li class="divider"></li>
                                <li><a href="#">One more separated link</a></li>
                                -->
                            </ul>
                        </div>

                    </div>
                    <div class="row">
                        <h3>Estadísticas de Facebook</h3>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <% if (hasPage) { %>
                            <div id="no-facebook" class="col-md-12" style="display: none;">
                                <h4>Este líder de opinión no tiene página de Facebook</h4>
                            </div>
                        <% } else { %>
                            <div id="no-facebook" class="col-md-12">
                                <h4>Este líder de opinión no tiene página de Facebook</h4>
                            </div>
                        <% } %>
                    </div>
                    <div id="stats-display" class="row">
                        <div class="col-md-3">
                            <% if  (hasPage) { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="blue">
                                        <i class="material-icons">thumb_up</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Seguidores</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="count-likes">0</h2><!--<h4>likes</h4>-->
                                    </div> 
                                </div>
                            <% } else { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="blue">
                                        <i class="material-icons">thumb_up</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Seguidores</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="count-likes"></h2><!--<h4>likes</h4>-->
                                    </div> 
                                </div>
                                <!--<h2 id="count-likes"></h2><h4></h4>-->
                            <% } %>
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-3">
                            <% if  (hasPage) { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="red">
                                        <i class="material-icons">rss_feed</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Publicaciones sobre corrupción</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="count-corrupcion">0</h2>
                                    </div> 
                                    <div id="corrupcion-footer" class="card-footer">
                                        <div class="stats">
                                            <i class="material-icons text-danger">info</i>
                                            <span id="describe-outlier-corrupcion">
                                            <% if (sesgoLideresCorrupcion['medios'][pageId]['corrupcion']['outlier'] == "large") { %>
                                                Esta persona publica sobre corrupción considerablemente más que el resto de líderes de opinión.
                                            <% } else if (sesgoLideresCorrupcion['medios'][pageId]['corrupcion']['outlier'] == "small") {%>
                                                Esta persona publica sobre corrupción considerablemente menos que el resto de líderes de opinión.
                                            <% } %>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            <% } else { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="red">
                                        <i class="material-icons">rss_feed</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Publicaciones sobre corrupción</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="count-corrupcion"></h2>
                                    </div> 
                                    <div class="card-footer">
                                        <div class="stats">
                                            <i class="material-icons text-danger">info</i>
                                            <span id="describe-outlier-corrupcion"></span>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-3">
                            <% if  (hasPage) { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="orange">
                                        <i class="material-icons">chat</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Cantidad de comentarios que mencionan a esta persona en noticias de corrupción</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="comment-corruption-count">0</h2>
                                    </div> 
                                </div>
                            <% } else { %>
                                <div class="card card-stats">
                                    <div class="card-header" data-background-color="orange">
                                        <i class="material-icons">chat</i>
                                    </div>
                                    <div class="card-content">
                                        <p class="category">Cantidad de comentarios que mencionan a esta persona en noticias de corrupción</p>
                                        <!--<h3 class="title">49/50<small>GB</small></h3>-->
                                        <h2 id="comment-corruption-count"></h2>
                                    </div> 
                                    <div class="card-footer">
                                        <div class="stats">
                                            <i class="material-icons text-danger">info</i>
                                            <span id="describe-outlier-corrupcion"></span>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        </div>
                    </div>
                    <% if  (hasPage) { %>
                    <div id="row-reactions" class="row">
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Like-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me gusta</h3></p>
                                    <h3 id="count-like">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me gusta" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Angry-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me enfada</h3></p>
                                    <h3 id="count-angry">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me enfada" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Haha-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me divierte</h3></p>
                                    <h3 id="count-haha">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me divierte" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Sad-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me entristece</h3></p>
                                    <h3 id="count-sad">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me entristece" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Love-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me encanta</h3></p>
                                    <h3 id="count-love">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me encanta" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Wow-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me asombra</h3></p>
                                    <h3 id="count-wow">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me asombra" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% } else { %>
                    <div id="row-reactions" class="row" style="display: none;">
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Like-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me gusta</h3></p>
                                    <h3 id="count-like">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me gusta" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Angry-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me enfada</h3></p>
                                    <h3 id="count-angry">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me enfada" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Haha-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me divierte</h3></p>
                                    <h3 id="count-haha">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me divierte" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Sad-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me entristece</h3></p>
                                    <h3 id="count-sad">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me entristece" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Love-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me encanta</h3></p>
                                    <h3 id="count-love">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me encanta" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card card-stats">
                                <div class="card-header" style="background-color: white">
                                    <img src="/img/reactions/Wow-500px.gif">
                                </div>
                                <div class="card-content">
                                    <p class="category"><h3>Me asombra</h3></p>
                                    <h3 id="count-wow">0</h3>
                                </div> 
                                <div class="card-footer">
                                    <div class="stats">
                                        <i class="material-icons">info</i>
                                        Número total de "Me asombra" que ha recibido esta persona en todas las publicaciones que ha hecho en Facebook.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% } %>
                    <div id="subtitle-word-cloud" class="row">
                        <h3>Nube de palabras de publicaciones de este líder de opinión</h3>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <% if (hasPage) { %>
                                <img id="word-cloud" width="100%" src="/img/wordclouds/<%=year%>-<%=month%>-<%=pageId%>.png">
                            <% } else { %>
                                <img id="word-cloud" width="100%" src="">
                            <% } %>
                        </div>
                    </div>
                    <div class="row">
                        <h3>Tendencias</h3>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <%- include('graphs/comments-sentiment', {
                            summary: summary
                        }) %>
                    </div>
                    <div class="row">
                        <%- include('graphs/actividad', {
                            summary: summary
                        }) %>
                    </div>
                    <div class="row">
                        <%- include('graphs/reactions', {

                        }) %>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header" data-background-color="orange">

                                    <h4 class="title">Comentarios populares sobre <span id="comment-table-entity"><% if (lideres.length > 0) { %><%= lideres[0].name %><% } %></span> este mes</h4>
                                    <p class="category"></p>
                                </div>
                                <div class="card-content table-responsive">
                                    <table class="table table-hover">
                                        <thead class="text-warning">
                                            <th>No.</th>
                                            <th>Mensaje</th>
                                            <th>Likes</th>
                                        </thead>
                                        <tbody id="top-comments">
                                            <% if (summary.length > 0) {
                                                for (var i = 0; i < summary[summary.length - 1].top_comments.length; i++) { %>
                                                    <tr>
                                                        <td><%= (i+1) %></td>
                                                        <td><%= summary[summary.length - 1].top_comments[i] %></td>
                                                        <td><%= summary[summary.length - 1].like_counts[i] %></td>
                                                    </tr>
                                            <% } %>
                                            <% } %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="pull-left">
                        <ul>
                        </ul>
                    </nav>
                    <p class="copyright pull-right">
                        &copy;
                        <script>
                            document.write(new Date().getFullYear())
                        </script>
                        Sentinel
                    </p>
                </div>
            </footer>
        </div>
    </div>
</body>
<!--   Core JS Files   -->
<script src="/js/jquery-3.2.1.min.js" type="text/javascript"></script>
<script src="/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/js/material.min.js" type="text/javascript"></script>
<!--  Charts Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.min.js"></script>
<script src="/js/chartist.min.js"></script>
<script src="/js/utils.js"></script>
<!--  Dynamic Elements plugin -->
<script src="/js/arrive.min.js"></script>
<!--  PerfectScrollbar Library -->
<script src="/js/perfect-scrollbar.jquery.min.js"></script>
<!--  Notifications Plugin    -->
<script src="/js/bootstrap-notify.js"></script>
<!-- Material Dashboard javascript methods -->
<script src="/js/material-dashboard.js?v=1.2.0"></script>
<!-- Material Dashboard DEMO methods, don't include it in your project! -->
<script src="/js/demo.js"></script>
<script src="/js/countUp.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        
        // Javascript method's body can be found in assets/js/demos.js
        demo.initDashboardPageCharts();
        /*
            TODO: total de likes que tiene la pagina del lider (en caso de que tenga pagina de fb)
            TODO: total de reacciones que ha recibido en su pagina el lider (todos los posts del lider) - en caso de que tenga página
            TODO: de cuales temas habla más el lider en su pagina (en caso de que tenga pagina)
            TODO: grafico de cantidad de posts sobre el personaje que se esta viendo (en los medios)
            TODO: actividad del lider (cuantas publicaciones ha hecho en su pagina) - en caso de que tenga pagina
            TODO: palabras que se suelen mencionar en publicaciones de este personaje (nada mas es buscar en el graph)
            TODO: Palabras mas mencionadas (word cloud) en los comentarios sobre publicaciones de un personaje especifico (ej: cuando se publica de Uribe, los comentarios suelen contener las palabras)
        */
        

        

        /*var myChartCtx = document.getElementById("posts").getContext("2d");
        window.posts = new Chart(myChartCtx, config);*/

    });
</script>
<%- include('scripts/dropdown.ejs', {
}) %>
<%- include('scripts/comments-sentiment.ejs', {
    summary: summary,
    liderDefault: lideres[0].id,
    entity: "lideres"
}) %>
<%- include('scripts/actividad', {
    casos: casos,
    entity: "lideres",
    displayDefault: lideres[0].id
}) %>
<%- include('scripts/reactions', {
    casos: casos,
    entity: "lideres",
    displayDefault: lideres[0].id
}) %>
<%- include('scripts/count-likes', {
    hasPage: hasPage,
    pageId: pageId,
    numberLikes: numberLikes,
    lideres: lideres
}) %>
<%- include('scripts/count-corrupcion', {
    hasPage: hasPage,
    pageId: pageId,
    numberLikes: numberLikes,
    lideres: lideres,
    sesgoLideresCorrupcion: sesgoLideresCorrupcion
}) %>
</html>